(function(){tinymce.PluginManager.requireLangPack('tooltip');tinymce.create('tinymce.plugins.TooltipPlugin',{init:function(ed,url){ed.addCommand('mceTooltip',function(){var se=ed.selection;if(se.isCollapsed()&&!ed.dom.getParent(se.getNode(),'A')){ed.windowManager.alert('tooltip.selection_error');return}ed.windowManager.open({file:url+'/tooltip.htm',width:500,height:400,inline:1},{plugin_url:url})});ed.onInit.add(function(){if(ed.settings.content_css!==false)ed.dom.loadCSS(url+"/css/content.css");if(typeof(jQuery)!='function'){alert(ed.getLang("tooltip.jquery_is_required"));return false}var d=ed.getDoc();var s='<style type="text/css">';s+='.exe-tooltip-text:before{content:"'+ed.getLang("tooltip.title")+' - '+ed.getLang("tooltip.type2")+'"}';jQuery(".exe-tooltip-text",d).each(function(){var dt=jQuery("a[href$='"+this.id+"']",d);if(dt.length==0){s+='#'+this.id+':before{content:"'+ed.getLang("tooltip.title")+' - '+ed.getLang("tooltip.type2_not_found")+'"}'}else if(dt.length==1){var content=dt.text();if(content!="")s+='#'+this.id+':before{content:"'+ed.getLang("tooltip.title")+' - '+ed.getLang("tooltip.type2")+' - '+content+'"}'}});s+='</style>';$("HEAD",d).append(s)});ed.addButton('tooltip',{title:'tooltip.title',cmd:'mceTooltip',image:url+'/img/tooltip.gif'})},getInfo:function(){return{longname:'Tooltips',author:'Ignacio Gros',authorurl:'http://www.gros.es',version:"2.1"}}});tinymce.PluginManager.add('tooltip',tinymce.plugins.TooltipPlugin)})();